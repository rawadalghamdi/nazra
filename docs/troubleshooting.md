<div dir="rtl" align="right">

# ๐ง ุฏููู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง

ุฏููู ุดุงูู ูุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ ูู ูุธุงู ูุธุฑุฉ.

---

## ๐ ุงููุญุชููุงุช

- [ูุดุงูู ุงูุชุซุจูุช](#ูุดุงูู-ุงูุชุซุจูุช)
- [ูุดุงูู Docker](#ูุดุงูู-docker)
- [ูุดุงูู ุงููุงููุฑุงุช](#ูุดุงูู-ุงููุงููุฑุงุช)
- [ูุดุงูู ุงููุดู](#ูุดุงูู-ุงููุดู)
- [ูุดุงูู ุงูุฃุฏุงุก](#ูุดุงูู-ุงูุฃุฏุงุก)
- [ูุดุงูู WebSocket](#ูุดุงูู-websocket)
- [ูุดุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช](#ูุดุงูู-ูุงุนุฏุฉ-ุงูุจูุงูุงุช)
- [ุฃุฏูุงุช ุงูุชุดุฎูุต](#ุฃุฏูุงุช-ุงูุชุดุฎูุต)

---

## ๐จ ูุดุงูู ุงูุชุซุจูุช

### โ ุฎุทุฃ: "Docker not found"

**ุงูุณุจุจ:** Docker ุบูุฑ ูุซุจุช ุฃู ุบูุฑ ูู PATH.

**ุงูุญู:**
```bash
# ุชุญูู ูู ุชุซุจูุช Docker
docker --version

# ุฅุฐุง ูู ููู ูุซุจุชุงูุ ุซุจุชู:
# macOS
brew install --cask docker

# Ubuntu
curl -fsSL https://get.docker.com | sh
sudo usermod -aG docker $USER
# ุณุฌู ุงูุฎุฑูุฌ ูุงุฏุฎู ูุฑุฉ ุฃุฎุฑู
```

---

### โ ุฎุทุฃ: "Permission denied" ุนูุฏ ุชุดุบูู Docker

**ุงูุณุจุจ:** ุงููุณุชุฎุฏู ููุณ ูู ูุฌููุนุฉ docker.

**ุงูุญู:**
```bash
# ุฅุถุงูุฉ ุงููุณุชุฎุฏู ููุฌููุนุฉ docker
sudo usermod -aG docker $USER

# ุชูุนูู ุงูุชุบููุฑ ุจุฏูู ุชุณุฌูู ุฎุฑูุฌ
newgrp docker

# ุฃู ุณุฌู ุงูุฎุฑูุฌ ูุงุฏุฎู ูุฑุฉ ุฃุฎุฑู
```

---

### โ ุฎุทุฃ: "Port already in use"

**ุงูุณุจุจ:** ุงููููุฐ ูุณุชุฎุฏู ูู ุชุทุจูู ุขุฎุฑ.

**ุงูุญู:**
```bash
# ูุนุฑูุฉ ุงูุชุทุจูู ุงูุฐู ูุณุชุฎุฏู ุงููููุฐ
lsof -i :8000  # ููู Backend
lsof -i :3000  # ููู Frontend

# ุฅููุงู ุงูุชุทุจูู ุฃู ุชุบููุฑ ุงููููุฐ ูู docker-compose.yml
```

---

### โ ุฎุทุฃ: "npm install" ูุดู

**ุงูุณุจุจ:** ูุดููุฉ ูู npm ุฃู ุงููุชุทูุจุงุช.

**ุงูุญู:**
```bash
# ุญุฐู node_modules ูุฅุนุงุฏุฉ ุงูุชุซุจูุช
rm -rf node_modules package-lock.json
npm cache clean --force
npm install

# ุฃู ุฌุฑุจ yarn
yarn install
```

---

### โ ุฎุทุฃ: "pip install" ูุดู

**ุงูุณุจุจ:** ูุดููุฉ ูู Python ุฃู ุงููุชุทูุจุงุช.

**ุงูุญู:**
```bash
# ุชุญุฏูุซ pip
pip install --upgrade pip

# ุชุซุจูุช ูุน ุชุฌุงูู ุงูุชุฎุฒูู ุงููุคูุช
pip install --no-cache-dir -r requirements.txt

# ููุดุงูู OpenCV
sudo apt install -y libgl1-mesa-glx libglib2.0-0
```

---

## ๐ณ ูุดุงูู Docker

### โ ุฎุทุฃ: "Cannot connect to Docker daemon"

**ุงูุณุจุจ:** Docker daemon ูุง ูุนูู.

**ุงูุญู:**
```bash
# ุชุดุบูู Docker daemon
sudo systemctl start docker

# ุงูุชุญูู ูู ุงูุญุงูุฉ
sudo systemctl status docker

# ุฅุฐุง ูุงู ููุงู ุฎุทุฃุ ุฃุนุฏ ุงูุชุดุบูู
sudo systemctl restart docker
```

---

### โ ุฎุทุฃ: "No space left on device"

**ุงูุณุจุจ:** ููุงุฏ ูุณุงุญุฉ Docker.

**ุงูุญู:**
```bash
# ุชูุธูู Docker
docker system prune -a --volumes

# ุญุฐู ุงูุตูุฑ ุบูุฑ ุงููุณุชุฎุฏูุฉ
docker image prune -a

# ุญุฐู ุงูุญุงููุงุช ุงููุชูููุฉ
docker container prune

# ุงูุชุญูู ูู ุงููุณุงุญุฉ
docker system df
```

---

### โ ุฎุทุฃ: "Container exits immediately"

**ุงูุณุจุจ:** ุฎุทุฃ ูู ุงูุชุทุจูู ุฏุงุฎู ุงูุญุงููุฉ.

**ุงูุญู:**
```bash
# ุนุฑุถ ุณุฌูุงุช ุงูุญุงููุฉ
docker-compose logs backend
docker-compose logs frontend

# ุชุดุบูู ุงูุญุงููุฉ ุจุดูู ุชูุงุนูู
docker-compose run --rm backend bash

# ูุญุต ุงููููุงุช ุฏุงุฎู ุงูุญุงููุฉ
docker exec -it nazra-backend ls -la /app
```

---

### โ ุฎุทุฃ: "Network timeout" ุฃุซูุงุก ุงูุจูุงุก

**ุงูุณุจุจ:** ูุดููุฉ ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช ุฃู DNS.

**ุงูุญู:**
```bash
# ุชุบููุฑ DNS ูู Docker
# ุฃุถู ููููู /etc/docker/daemon.json
{
  "dns": ["8.8.8.8", "8.8.4.4"]
}

# ุฃุนุฏ ุชุดุบูู Docker
sudo systemctl restart docker

# ุฃุนุฏ ุงููุญุงููุฉ
docker-compose build --no-cache
```

---

## ๐ท ูุดุงูู ุงููุงููุฑุงุช

### โ ูุง ูููู ุงูุงุชุตุงู ุจุงููุงููุฑุง

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. ุนููุงู IP ุฎุงุทุฆ
2. ุจูุงูุงุช ุงูุฏุฎูู ุฎุงุทุฆุฉ
3. ุงููุงููุฑุง ุบูุฑ ูุชุตูุฉ ุจุงูุดุจูุฉ
4. RTSP ุบูุฑ ูููุนูู

**ุฎุทูุงุช ุงูุชุดุฎูุต:**
```bash
# 1. ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุดุจูุฉ
ping 192.168.1.100

# 2. ุชุญูู ูู ูููุฐ RTSP
nc -zv 192.168.1.100 554

# 3. ุงุฎุชุจุฑ ุงูุฑุงุจุท ูุน VLC
vlc rtsp://admin:password@192.168.1.100:554/stream1

# 4. ุงุฎุชุจุฑ ูุน ffmpeg
ffprobe rtsp://admin:password@192.168.1.100:554/stream1
```

**ุงูุญููู:**
```bash
# ุฅุฐุง ูุดู ping - ุชุญูู ูู:
# - ุนููุงู IP ุตุญูุญ
# - ุงููุงููุฑุง ูุชุตูุฉ ุจุงูุดุจูุฉ
# - ูุง ููุฌุฏ ุฌุฏุงุฑ ุญูุงูุฉ ูููุน ุงูุงุชุตุงู

# ุฅุฐุง ูุดู ุงุฎุชุจุงุฑ ุงููููุฐ:
# - ูุนูู RTSP ูู ุฅุนุฏุงุฏุงุช ุงููุงููุฑุง
# - ุชุญูู ูู ุฑูู ุงููููุฐ (554 ูู ุงูุงูุชุฑุงุถู)

# ุฅุฐุง ูุดู VLC:
# - ุชุญูู ูู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ
# - ุฌุฑุจ ุตูุบ RTSP ูุฎุชููุฉ
```

---

### โ ุงูุจุซ ูุชูุทุน ุฃู ุจุทูุก

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. ุถุนู ุงูุดุจูุฉ
2. ุฅุนุฏุงุฏุงุช ุงูุจุซ ุนุงููุฉ ุฌุฏุงู
3. ุงูุฎุงุฏู ูุญููู

**ุงูุญููู:**
```bash
# 1. ุงุณุชุฎุฏู ุงูุจุซ ุงููุฑุนู ุจุฏูุงู ูู ุงูุฑุฆูุณู
# ูู: rtsp://...?subtype=0
# ุฅูู: rtsp://...?subtype=1

# 2. ููู ุฌูุฏุฉ ุงูุจุซ ูู ุฅุนุฏุงุฏุงุช ุงููุงููุฑุง
# ุงูุฏูุฉ: 720p ุจุฏูุงู ูู 1080p
# FPS: 15 ุจุฏูุงู ูู 25

# 3. ุงุณุชุฎุฏู TCP ุจุฏูุงู ูู UDP
rtsp://...?tcp

# 4. ุชุญูู ูู ุงุณุชุฎุฏุงู ุงูุดุจูุฉ
iftop -i eth0
```

---

### โ ุฎุทุฃ 401 (Unauthorized)

**ุงูุณุจุจ:** ุจูุงูุงุช ุงููุตุงุฏูุฉ ุฎุงุทุฆุฉ.

**ุงูุญููู:**
```bash
# 1. ุชุญูู ูู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ

# 2. ุฅุฐุง ูุงูุช ูููุฉ ุงููุฑูุฑ ุชุญุชูู ุฃุญุฑู ุฎุงุตุฉุ ุงุณุชุฎุฏู URL encoding
# @ = %40
# : = %3A
# / = %2F

# ูุซุงู:
# password@123 โ password%40123
rtsp://admin:password%40123@192.168.1.100:554/stream

# 3. ุฌุฑุจ ููุน ูุตุงุฏูุฉ ูุฎุชูู
# ุฃุถู ?auth=basic ููุฑุงุจุท
```

---

### โ ุดุงุดุฉ ุณูุฏุงุก (ูุง ููุฌุฏ ููุฏูู)

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. ุชุฑููุฒ ุบูุฑ ูุฏุนูู
2. ูุณุงุฑ ุงูุจุซ ุฎุงุทุฆ

**ุงูุญููู:**
```bash
# 1. ุชุญูู ูู ุชุฑููุฒ ุงูููุฏูู
ffprobe -v error -select_streams v:0 -show_entries stream=codec_name rtsp://...

# ุฅุฐุง ูุงู H.265ุ ุบููุฑู ูู H.264 ูู ุฅุนุฏุงุฏุงุช ุงููุงููุฑุง

# 2. ุฌุฑุจ ูุณุงุฑุงุช ูุฎุชููุฉ
/Streaming/Channels/101
/Streaming/Channels/102
/cam/realmonitor?channel=1&subtype=0
/live
/video1
```

---

## ๐ฏ ูุดุงูู ุงููุดู

### โ ุงููุดู ุจุทูุก ุฌุฏุงู

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. ูุง ููุฌุฏ GPU
2. ุงููููุฐุฌ ูุจูุฑ ุฌุฏุงู
3. ุงูุฏูุฉ ุนุงููุฉ

**ุงูุญููู:**
```bash
# 1. ุชุญูู ูู GPU
python -c "import torch; print(torch.cuda.is_available())"

# 2. ุงุณุชุฎุฏู ูููุฐุฌ ุฃุตุบุฑ
# ุบููุฑ ูู ุงูุฅุนุฏุงุฏุงุช ูู yolo11x ุฅูู yolo11m ุฃู yolo11s

# 3. ููู ุฏูุฉ ุงููุดู
# ูู .env
STREAM_WIDTH=640
STREAM_HEIGHT=480

# 4. ุฒุฏ frame skip
DETECTION_FRAME_SKIP=3
```

---

### โ ูุซุฑุฉ ุงูุฅูุฐุงุฑุงุช ุงููุงุฐุจุฉ

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. ุญุณุงุณูุฉ ุนุงููุฉ ุฌุฏุงู
2. ุธุฑูู ุฅุถุงุกุฉ ุณูุฆุฉ
3. ุฃุฌุณุงู ูุดุงุจูุฉ ููุฃุณูุญุฉ

**ุงูุญููู:**
```bash
# 1. ุฒุฏ ุนุชุจุฉ ุงูุซูุฉ
# ูู .env
DETECTION_THRESHOLD=0.8  # ุจุฏูุงู ูู 0.7

# 2. ูุนูู NMS ุฃููู
NMS_THRESHOLD=0.5  # ุจุฏูุงู ูู 0.4

# 3. ูู ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉุ ุนุฏูู ุญุณุงุณูุฉ ูู ูุงููุฑุง ุนูู ุญุฏุฉ
```

---

### โ ูุง ูุชู ุงูุชุดุงู ุงูุฃุณูุญุฉ

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. ุญุณุงุณูุฉ ููุฎูุถุฉ ุฌุฏุงู
2. ุงููููุฐุฌ ุบูุฑ ูุญููู
3. ุงููุดู ุบูุฑ ูููุนูู

**ุงูุญููู:**
```bash
# 1. ุชุญูู ูู ุชุญููู ุงููููุฐุฌ
docker-compose logs backend | grep "ูููุฐุฌ"

# 2. ููู ุนุชุจุฉ ุงูุซูุฉ
DETECTION_THRESHOLD=0.5

# 3. ุชุญูู ูู ุชูุนูู ุงููุดู ูููุงููุฑุง
# ูู ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉุ ุชุฃูุฏ ุฃู "ุชูุนูู ุงููุดู" ูููุนูู

# 4. ุงุฎุชุจุฑ ุงููุดู ูุฏููุงู
curl -X POST "http://localhost:8000/api/v1/detect" \
  -F "image=@test_image.jpg"
```

---

## โก ูุดุงูู ุงูุฃุฏุงุก

### โ ุงุณุชุฎุฏุงู ุนุงูู ููุฐุงูุฑุฉ

**ุงูุญููู:**
```bash
# 1. ุญุฏุฏ ุฐุงูุฑุฉ ุงูุญุงููุงุช ูู docker-compose.yml
services:
  backend:
    mem_limit: 4g
    memswap_limit: 4g

# 2. ููู ุนุฏุฏ ุงููุงููุฑุงุช ุงููุนุงูุฌุฉ ูู ููุช ูุงุญุฏ
MAX_CONCURRENT_STREAMS=3

# 3. ุงุณุชุฎุฏู ุงูุจุซ ุงููุฑุนู ูููุนุงููุฉ
```

---

### โ ุงุณุชุฎุฏุงู ุนุงูู ููู CPU

**ุงูุญููู:**
```bash
# 1. ุงุณุชุฎุฏู GPU ุฅู ุฃููู

# 2. ููู FPS ุงููุนุงูุฌ
STREAM_FPS=10

# 3. ููู ุฏูุฉ ุงููุนุงูุฌุฉ
STREAM_WIDTH=480
STREAM_HEIGHT=360

# 4. ุฒุฏ frame skip
DETECTION_FRAME_SKIP=5
```

---

### โ ุชุฃุฎุฑ ูู ุงูุจุซ (Latency)

**ุงูุญููู:**
```bash
# 1. ููู ุญุฌู Buffer
# ูู ุฅุนุฏุงุฏุงุช FFmpeg/OpenCV

# 2. ุงุณุชุฎุฏู TCP
rtsp://...?tcp

# 3. ููู ุฌูุฏุฉ ุงูุจุซ ูููุนุงููุฉ

# 4. ุงุณุชุฎุฏู ุงุชุตุงู ุณููู ุจุฏูุงู ูู WiFi
```

---

## ๐ ูุดุงูู WebSocket

### โ WebSocket ูุง ูุชุตู

**ุงูุญููู:**
```bash
# 1. ุชุญูู ูู ุฃู ุงูุฎุงุฏู ูุนูู
curl http://localhost:8000/health

# 2. ุชุญูู ูู CORS
# ูู .env
CORS_ORIGINS=*

# 3. ุชุญูู ูู ุนููุงู WebSocket
# ูุฌุจ ุฃู ูููู ws:// ูููุณ http://
ws://localhost:8000/ws/alerts
```

---

### โ WebSocket ูููุทุน ุจุงุณุชูุฑุงุฑ

**ุงูุญููู:**
```bash
# 1. ุชุญูู ูู ุฅุนุฏุงุฏุงุช Nginx (ุฅุฐุง ููุช ุชุณุชุฎุฏูู)
location /ws {
    proxy_pass http://backend:8000;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_read_timeout 86400;  # ููู ูุงูู
}

# 2. ูุนูู heartbeat ูู ุงูููุฏ
# ููุฑุณู ping ูู 30 ุซุงููุฉ

# 3. ุชุญูู ูู ุฌุฏุงุฑ ุงูุญูุงูุฉ
```

---

## ๐๏ธ ูุดุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### โ ุฎุทุฃ: "Database is locked"

**ุงูุณุจุจ:** SQLite ูุง ูุฏุนู ุงููุตูู ุงููุชุฒุงูู ุจุดูู ุฌูุฏ.

**ุงูุญููู:**
```bash
# 1. ููุชุทููุฑ - ุฃููู ุงูุนูููุงุช ุงููุชุฒุงููุฉ

# 2. ููุฅูุชุงุฌ - ุงูุชูู ูู PostgreSQL
# ูู .env
DATABASE_URL=postgresql+asyncpg://user:pass@localhost/nazra
```

---

### โ ุฎุทุฃ: "Table does not exist"

**ุงูุญู:**
```bash
# ุฃุนุฏ ุฅูุดุงุก ุงูุฌุฏุงูู
docker-compose exec backend python -c "
from app.database import init_db
import asyncio
asyncio.run(init_db())
"
```

---

### โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุงููุฉ

**ุงูุญู:**
```bash
# 1. ุฃููู ุงูุฎุฏูุงุช
docker-compose down

# 2. ุงูุณุฎ ุงููุงุนุฏุฉ ุงุญุชูุงุทูุงู
cp data/nazra.db data/nazra.db.backup

# 3. ุญุงูู ุงูุฅุตูุงุญ
sqlite3 data/nazra.db "PRAGMA integrity_check;"

# 4. ุฅุฐุง ูุดูุ ุงุญุฐู ูุฃุนุฏ ุงูุฅูุดุงุก
rm data/nazra.db
docker-compose up -d
```

---

## ๐ ุฃุฏูุงุช ุงูุชุดุฎูุต

### ุณูุฑูุจุช ุงูุชุดุฎูุต ุงูุดุงูู

```bash
#!/bin/bash
# diagnose.sh
echo "=========================================="
echo "๐ ุชุดุฎูุต ูุธุงู ูุธุฑุฉ"
echo "=========================================="

echo ""
echo "๐ ูุนูููุงุช ุงููุธุงู:"
echo "-------------------"
uname -a
echo ""

echo "๐ณ Docker:"
echo "----------"
docker --version
docker-compose --version
echo ""

echo "๐ฆ ุญุงูุฉ ุงูุญุงููุงุช:"
echo "-----------------"
docker-compose ps
echo ""

echo "๐พ ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ:"
echo "-------------------"
docker stats --no-stream
echo ""

echo "๐ ุขุฎุฑ ุณุฌูุงุช Backend:"
echo "----------------------"
docker-compose logs --tail=20 backend
echo ""

echo "๐ ุขุฎุฑ ุณุฌูุงุช Frontend:"
echo "-----------------------"
docker-compose logs --tail=20 frontend
echo ""

echo "๐ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู:"
echo "------------------"
curl -s -o /dev/null -w "%{http_code}" http://localhost:8000/health
echo " - Backend Health"
curl -s -o /dev/null -w "%{http_code}" http://localhost:3000
echo " - Frontend"

echo ""
echo "=========================================="
echo "โ ุงูุชูู ุงูุชุดุฎูุต"
echo "=========================================="
```

### ุชุดุบูู ุงูุชุดุฎูุต

```bash
chmod +x diagnose.sh
./diagnose.sh > diagnosis_report.txt
```

---

## ๐ ุทูุจ ุงููุณุงุนุฏุฉ

ุฅุฐุง ูู ุชุญู ุงููุดููุฉุ ุงูุชุญ Issue ุฌุฏูุฏุฉ ูุน:

1. **ูุตู ุงููุดููุฉ** ุจุงูุชูุตูู
2. **ุฎุทูุงุช ุฅุนุงุฏุฉ ุงูุฅูุชุงุฌ**
3. **ุฑุณุงุฆู ุงูุฎุทุฃ** ุงููุงููุฉ
4. **ูุนูููุงุช ุงููุธุงู**:
   - ูุธุงู ุงูุชุดุบูู ูุงูุฅุตุฏุงุฑ
   - ุฅุตุฏุงุฑ Docker
   - ููุงุตูุงุช ุงูุฌูุงุฒ
5. **ููู ุงูุชุดุฎูุต** (ูู ุงูุณูุฑูุจุช ุฃุนูุงู)

---

<p align="center">
  <a href="../README.md">๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</a> โข
  <a href="installation.md">๐๏ธ ุฏููู ุงูุชุซุจูุช</a> โข
  <a href="camera-setup.md">๐ท ุฏููู ุงููุงููุฑุงุช</a>
</p>

</div>
